generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String   @id @default(uuid())
  email         String   @unique
  username      String   @unique
  passwordHash  String   @map("password_hash")
  role          Role     @default(USER)
  telegramUserId BigInt? @map("telegram_user_id")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")
  lastLogin     DateTime? @map("last_login")
  
  bets Bet[]
  
  @@map("users")
}

model Bet {
  id              String    @id @default(uuid())
  userId          String    @map("user_id")
  jogo            String
  placar          String?
  mercado         String
  linhaDaAposta   String    @map("linha_da_aposta")
  oddTipster      Float     @map("odd_tipster")
  oddReal         Float?    @map("odd_real")
  pegou           Boolean   @default(false)
  resultado       String?
  lucroPrejuizo   Float?    @map("lucro_prejuizo")
  chatId          BigInt    @map("chat_id")
  messageId       BigInt    @map("message_id")
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  
  user User @relation(fields: [userId], references: [id])
  
  @@map("bets")
}

enum Role {
  ADMIN
  USER
  
  @@map("role")
}